<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>QQ登录页面</title>
	<link rel="stylesheet" href="css/style.css" type="text/css">
</head>
<body>
	<div class="mainbody" id="mainbody">
		<div class="logo" id="logo"></div>
		<div class="hidelogo">
			<img src="./image/boxy_btn.png" alt="">
		</div>
		<div class="sub">
			<form action="doAction.php" method="POST" id="formtable" target="_self">
				<label for="username">账 号:</label>
				<input type="text" checked="check" name="username" id="username" placeholder="QQ号码或Email账号"><br />
				<label for="password">密 码:</label>
				<input type="password" checked="check" name="password" id="password">
				<input type="submit" value="" class="button">

				<div class="status" id="status">
				  <div class="on">
					<img src="image/1.png" id="Icon"><img src="image/9.png" id="smallIcon" style="margin-left: 5px;"><div class="textArea" id="textArea">在线</div>
				  </div>	
					<div class="hideArea" id="hideArea">
						<div class="line">
						<img src="image/1.png"><div class="textArea">我在线上</div>
						</div>
						<div class="line">
						<img src="image/5.png"><div class="textArea">Q我吧</div>&nbsp;
						</div>
						<div class="line">
						<img src="image/2.png"><div class="textArea">离开</div>&nbsp;&nbsp;
						</div>
						<div class="line">
						<img src="image/3.png"><div class="textArea">忙碌</div>&nbsp;&nbsp;
						</div>
						<div class="line">
						<img src="image/7.png"><div class="textArea">请勿打扰</div>&nbsp;
						</div>
						<div class="line">
						<img src="image/4.png"><div class="textArea">隐身</div>&nbsp;&nbsp;
						</div>
					</div>
				</div>
				<div>
					<a href="addUser.html"  class="addUser"></a>
				</div>
			</form>
		</div>
	</div>
</body>
<script>
	window.onload=function(){
	var hide = document.getElementsByClassName("hidelogo")[0];
	var main = document.getElementsByClassName("mainbody")[0];
	hide.onclick=function(){
		main.style.display="none";
	}
/*状态栏的效果*/
	var status = document.getElementById("status");
	var hiden = document.getElementById("hideArea");
	var lines = document.getElementsByClassName("line");
	var textArea = document.getElementById("textArea");
	var smallIcon = document.getElementById("smallIcon");
	var Icon = document.getElementById("Icon");

	status.onclick=function(event){
		event=event||window.event;
		event.stopPropagation();
		hiden.style.display="block";
		smallIcon.src="image/8.png";
	}
	window.onclick=function(){
		hiden.style.display="none";
		smallIcon.src="image/9.png";
	}
	for(var i=0 , j=lines.length;i<j;i++){
		lines[i].onmouseover=function(){
			this.style.background="#CCC";
		}
		lines[i].onmouseout=function(){
			this.style.background="#FFF";
		}
		lines[i].onclick=function(event){
			event.stopPropagation();
			var icon = this.getElementsByTagName("img")[0];
			var divText = this.getElementsByTagName("div")[0];
			Icon.src = icon.src;
			textArea.innerHTML = divText.innerHTML;
			hiden.style.display="none";	
			smallIcon.src="image/9.png";
		}
	}
/*拖拽效果的实现*/
	var mainbody=document.getElementById("mainbody");
	var logo=document.getElementById("logo");
	var flag=true;
	logo.onmousedown=function(event){
		flag=true;
		var sX=event.clientX;
		var sY=event.clientY;
		var nX=mainbody.offsetLeft;
		var nY=mainbody.offsetTop;
		/*var time = setInterval(function(){

		},1000);*/
		document.onmousemove=function(event){
			if(flag&&event.which==1){
			var X=event.clientX;
			var Y=event.clientY;
			var nX1=X-sX+nX;
		    var nY1=Y-sY+nY;
		    //获取浏览器宽度
		    if (window.innerWidth)
				{winWidth = window.innerWidth;}
			else if ((document.body) && (document.body.clientWidth))
				{winWidth = document.body.clientWidth;}
			//获取元素宽度
			bodyWidth=mainbody.offsetWidth;
		    // console.log(mainbody.offsetWidth);
		    //获取浏览器高度
		    if (window.innerHeight)
			winHeight = window.innerHeight;
			else if ((document.body) && (document.body.clientHeight))
			winHeight = document.body.clientHeight;
			//获取元素高度
			bodyHeight=mainbody.offsetHeight;
			if(nX1<0){
				mainbody.style.left=2+"px";
			}else if(nX1>winWidth-bodyWidth){
				mainbody.style.left=winWidth-bodyWidth-8+"px";
			}else{
				mainbody.style.left=nX1+"px";
			}
			if(nY1<0){
				mainbody.style.top=6+"px";
			}else if(nY1>winHeight-bodyHeight){
				mainbody.style.bottom=6+"px";
			}else{
				mainbody.style.top=nY1+"px";
			}
		}
		};
	}
	logo.onmouseup=function(){
		flag=false;
	}
}
</script>
</html>
